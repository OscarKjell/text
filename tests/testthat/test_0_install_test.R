library(testthat)
library(text)

test_that("installing text", {
  skip_on_cran()

  text::textrpp_install(prompt = FALSE,
                  envname = "test_ok")

  text::textrpp_initialize(textEmbed_test = TRUE,
                     save_profile = TRUE,
                     prompt = FALSE,
                     condaenv = "test_ok")

  text_test <- text::textEmbed("hello")

  expect_equal(text_test$tokens$texts[[1]]$Dim1[[1]], -0.9554495, tolerance = 0.0001)

  # help(textrpp_uninstall)
#  textrpp_uninstall(prompt = FALSE,
#                    envname = "test_ok")
#
})
